<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°œì£¼ì„œ ë³€í™˜ ë° ì†¡ì¥ ë“±ë¡ ì‹œìŠ¤í…œ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        :root {
            --primary-color: #3498db;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --text-color: #2c3e50;
            --text-light: #7f8c8d;
            --border-color: #e9ecef;
            --bg-color: #f5f7fa;
            --sidebar-width: 240px;
            --sidebar-bg: #2c3e50;
            --sidebar-hover: #34495e;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            background: var(--bg-color);
            min-height: 100vh;
            display: flex;
        }

        /* ì‚¬ì´ë“œë°” */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--sidebar-bg);
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            z-index: 100;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 20px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .connection-status {
            padding: 8px 20px;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .connection-status .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #e74c3c;
        }

        .connection-status.connected .dot { background: #27ae60; }
        .connection-status .text { color: #7f8c8d; }

        .menu-group { margin-bottom: 10px; }

        .menu-group-title {
            padding: 12px 20px 8px;
            color: #95a5a6;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: #bdc3c7;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .menu-item:hover { background: var(--sidebar-hover); color: white; }
        .menu-item.active {
            background: var(--sidebar-hover);
            color: white;
            border-left-color: var(--primary-color);
        }

        .menu-item .icon { margin-right: 12px; font-size: 16px; }
        .menu-item .badge {
            margin-left: auto;
            background: var(--danger-color);
            color: white;
            font-size: 11px;
            font-weight: 700;
            padding: 2px 8px;
            border-radius: 10px;
        }

        /* ì‚¬ìš©ì ë“œë¡­ë‹¤ìš´ */
        .user-dropdown { margin-bottom: 5px; }

        .user-dropdown-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 20px;
            color: #ecf0f1;
            cursor: pointer;
            transition: all 0.2s;
            background: rgba(255,255,255,0.05);
            border-left: 3px solid transparent;
        }

        .user-dropdown-header:hover { background: var(--sidebar-hover); }
        .user-dropdown-header.active { border-left-color: var(--success-color); }
        .user-dropdown-header .user-name { display: flex; align-items: center; font-weight: 600; }
        .user-dropdown-header .user-name .icon { margin-right: 10px; }
        .user-dropdown-header .arrow { transition: transform 0.2s; }
        .user-dropdown-header.expanded .arrow { transform: rotate(180deg); }

        .user-dropdown-menu {
            display: none;
            background: rgba(0,0,0,0.15);
        }

        .user-dropdown-menu.show { display: block; }
        .user-dropdown-menu .menu-item { padding-left: 48px; font-size: 13px; }

        .btn-add-user {
            width: 100%;
            padding: 8px;
            background: rgba(255,255,255,0.1);
            border: 1px dashed rgba(255,255,255,0.3);
            color: #95a5a6;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
            margin: 10px 20px;
            width: calc(100% - 40px);
        }

        .btn-add-user:hover { background: rgba(255,255,255,0.15); color: #bdc3c7; }

        /* ë©”ì¸ ì»¨í…ì¸  */
        .main-content {
            margin-left: var(--sidebar-width);
            flex: 1;
            padding: 20px;
            min-height: 100vh;
        }

        .page-header { margin-bottom: 24px; }
        .page-header h1 { color: var(--text-color); font-size: 24px; font-weight: 600; }
        .page-header p { color: var(--text-light); margin-top: 4px; }

        .page-content { display: none; }
        .page-content.active { display: block; }

        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            padding: 24px;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--primary-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* ë‹¬ë ¥ */
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-header h2 { font-size: 20px; color: var(--text-color); }
        .calendar-nav { display: flex; gap: 8px; }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }

        .calendar-day-header {
            text-align: center;
            padding: 12px;
            font-weight: 600;
            color: var(--text-light);
            font-size: 12px;
        }

        .calendar-day-header.sunday { color: #dc3545; }
        .calendar-day-header.saturday { color: #0d6efd; }

        .calendar-day {
            min-height: 90px;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
        }

        .calendar-day:hover { background: #e3f2fd; border-color: var(--primary-color); }
        .calendar-day.today { border: 2px solid var(--primary-color); background: #e3f2fd; }
        .calendar-day.other-month { opacity: 0.4; }

        .calendar-day-number {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 4px;
            color: var(--text-color);
        }

        .calendar-day.sunday .calendar-day-number { color: #dc3545; }
        .calendar-day.saturday .calendar-day-number { color: #0d6efd; }

        .calendar-day-orders { font-size: 11px; }

        .calendar-order-item {
            background: #fff3e0;
            color: #e65100;
            padding: 2px 6px;
            border-radius: 4px;
            margin-bottom: 2px;
            font-size: 10px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .calendar-order-item.shipped { background: #e8f5e9; color: #2e7d32; }
        .calendar-order-item.pending { background: #fff3e0; color: #e65100; }

        .calendar-order-count {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 11px;
        }

        /* í¼ ìš”ì†Œ */
        .form-row {
            display: flex;
            gap: 20px;
            align-items: flex-end;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .form-group { flex: 1; min-width: 200px; }
        .form-group label {
            display: block;
            font-weight: 500;
            color: var(--text-color);
            margin-bottom: 8px;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 14px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* ë²„íŠ¼ */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary { background: var(--primary-color); color: white; }
        .btn-primary:hover { background: #2980b9; }
        .btn-success { background: var(--success-color); color: white; }
        .btn-success:hover { background: #219a52; }
        .btn-warning { background: var(--warning-color); color: white; }
        .btn-danger { background: var(--danger-color); color: white; }
        .btn-secondary { background: #95a5a6; color: white; }
        .btn-secondary:hover { background: #7f8c8d; }
        .btn-small { padding: 6px 12px; font-size: 12px; }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; }
        .btn-group { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 20px; }

        /* í…Œì´ë¸” */
        .table-container {
            overflow-x: auto;
            margin-top: 16px;
            max-height: 500px;
            overflow-y: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
        }

        th, td {
            padding: 10px 8px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            white-space: nowrap;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: var(--text-color);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        tr:hover { background: #f1f3f5; }

        /* ê²°ê³¼ ë°•ìŠ¤ */
        .result-box {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 16px;
        }

        .result-box h3 { margin-bottom: 16px; color: var(--text-color); }
        .result-box h4 { margin: 16px 0 8px 0; color: var(--text-color); font-size: 14px; }

        /* ìƒíƒœ */
        .status { padding: 12px; border-radius: 8px; margin-top: 12px; display: none; }
        .status.show { display: block; }
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        .status.info { background: #cce5ff; color: #004085; }

        /* ì—…ë¡œë“œ ì˜ì—­ */
        .upload-area {
            border: 3px dashed #bdc3c7;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: #fafbfc;
        }

        .upload-area:hover, .upload-area.dragover {
            border-color: var(--primary-color);
            background: #ebf5fb;
        }

        .upload-area input { display: none; }
        .upload-icon { font-size: 48px; margin-bottom: 16px; }
        .upload-text { color: var(--text-light); font-size: 16px; }

        /* ëª¨ë‹¬ */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.show { display: flex; }

        .modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-header h3 { font-size: 18px; color: var(--text-color); }
        .modal-close { background: none; border: none; font-size: 24px; cursor: pointer; color: var(--text-light); }
        .modal-body { padding: 20px; }
        .modal-footer { padding: 20px; border-top: 1px solid var(--border-color); display: flex; gap: 12px; justify-content: flex-end; }

        /* í† ìŠ¤íŠ¸ */
        .toast-container {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 9999;
        }

        .toast {
            background: var(--text-color);
            color: white;
            padding: 14px 24px;
            border-radius: 8px;
            margin-top: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            animation: slideIn 0.3s ease;
        }

        .toast.success { background: var(--success-color); }
        .toast.error { background: var(--danger-color); }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* ë¡œë”© */
        .loading {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(255,255,255,0.9);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .loading.show { display: flex; }
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        /* ìš”ì•½ ì •ë³´ */
        .result-summary {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 16px;
        }

        .summary-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .summary-item .label { color: var(--text-light); font-size: 13px; }
        .summary-item .value { font-weight: 600; color: var(--text-color); }

        /* ìƒíƒœ ë±ƒì§€ */
        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .status-badge.shipped { background: #d4edda; color: #155724; }
        .status-badge.not-shipped { background: #fff3cd; color: #856404; }
        .status-badge.paid { background: #cce5ff; color: #004085; }
        .status-badge.not-paid { background: #f8d7da; color: #721c24; }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .sidebar { transform: translateX(-100%); transition: transform 0.3s; }
            .sidebar.show { transform: translateX(0); }
            .main-content { margin-left: 0; }
            .mobile-header { display: flex !important; }
            .calendar-day { min-height: 60px; }
            .calendar-day-orders { display: none; }
        }

        .mobile-header {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 56px;
            background: white;
            border-bottom: 1px solid var(--border-color);
            align-items: center;
            padding: 0 16px;
            z-index: 99;
        }

        .hamburger {
            width: 40px;
            height: 40px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
        }

        .overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            z-index: 99;
        }

        .overlay.show { display: block; }
    </style>
</head>
<body>
    <!-- ëª¨ë°”ì¼ í—¤ë” -->
    <div class="mobile-header">
        <button class="hamburger" onclick="toggleSidebar()">â˜°</button>
        <span style="margin-left: 12px; font-weight: 600;">ì£¼ë¬¸ê´€ë¦¬</span>
    </div>

    <div class="overlay" onclick="toggleSidebar()"></div>

    <!-- ì‚¬ì´ë“œë°” -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">ğŸ“¦ ë°œì£¼ì„œ ë³€í™˜ ì‹œìŠ¤í…œ</div>

        <div class="connection-status" id="connection-status">
            <span class="dot"></span>
            <span class="text">ì—°ê²° ì¤‘...</span>
        </div>

        <!-- ê³µí†µ ë©”ë‰´ -->
        <div class="menu-group">
            <div class="menu-group-title">ê³µí†µ</div>
            <div class="menu-item active" onclick="showPage('dashboard')">
                <span class="icon">ğŸ“Š</span> ëŒ€ì‹œë³´ë“œ
            </div>
            <div class="menu-item" onclick="showPage('integrated-view')">
                <span class="icon">ğŸ”</span> í†µí•©ì¡°íšŒ
            </div>
        </div>

        <!-- ê´€ë¦¬ ë©”ë‰´ -->
        <div class="menu-group">
            <div class="menu-group-title">ê´€ë¦¬</div>
            <div class="menu-item" onclick="showPage('cost-management')">
                <span class="icon">ğŸ’°</span> ì›ê°€ê´€ë¦¬
            </div>
            <div class="menu-item" onclick="showPage('sku-management')">
                <span class="icon">ğŸ“‹</span> SKUìƒí’ˆê´€ë¦¬
            </div>
            <div class="menu-item" onclick="showPage('vendor-mapping')">
                <span class="icon">ğŸ¢</span> ê±°ë˜ì²˜ë³„ ìƒí’ˆê´€ë¦¬
            </div>
            <div class="menu-item" onclick="showPage('vendor-delivery')">
                <span class="icon">ğŸšš</span> ê±°ë˜ì²˜ë³„ íƒë°°ê´€ë¦¬
            </div>
        </div>

        <!-- ì‚¬ìš©ìë³„ ë©”ë‰´ -->
        <div class="menu-group">
            <div class="menu-group-title">ì‚¬ìš©ìë³„ ì‘ì—…</div>
            <div id="user-menus"></div>
            <button class="btn-add-user" onclick="openAddUserModal()">+ ì‚¬ìš©ì ì¶”ê°€</button>
        </div>
    </div>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="main-content">
        <!-- ëŒ€ì‹œë³´ë“œ -->
        <div id="dashboard" class="page-content active">
            <div class="page-header">
                <h1>ëŒ€ì‹œë³´ë“œ</h1>
                <p>ë°°ì†¡ ì¼ì • ê´€ë¦¬ ë° ë°œì£¼ëŸ‰ ê³„ì‚°</p>
            </div>

            <!-- ë‹¬ë ¥ -->
            <div class="card">
                <div class="calendar-header">
                    <div class="calendar-nav">
                        <button class="btn btn-secondary btn-small" onclick="changeMonth(-1)">â—€ ì´ì „</button>
                    </div>
                    <h2 id="calendar-title">2026ë…„ 1ì›”</h2>
                    <div class="calendar-nav">
                        <button class="btn btn-secondary btn-small" onclick="changeMonth(1)">ë‹¤ìŒ â–¶</button>
                        <button class="btn btn-primary btn-small" onclick="goToToday()">ì˜¤ëŠ˜</button>
                    </div>
                </div>
                <div class="calendar-grid" id="calendar-grid"></div>
            </div>

            <!-- ê¸°ê°„ë³„ ë°œì£¼ëŸ‰ ê³„ì‚° -->
            <div class="card">
                <div class="card-title">ê¸°ê°„ë³„ ë°œì£¼ëŸ‰ ê³„ì‚°</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ì‹œì‘ì¼</label>
                        <input type="date" id="range-start">
                    </div>
                    <div class="form-group">
                        <label>ì¢…ë£Œì¼</label>
                        <input type="date" id="range-end">
                    </div>
                    <div class="form-group" style="flex: 0;">
                        <label>&nbsp;</label>
                        <button class="btn btn-success" onclick="calculateRangeOrder()">ë°œì£¼ëŸ‰ ê³„ì‚°</button>
                    </div>
                </div>
                <div id="range-result"></div>
            </div>
        </div>

        <!-- í†µí•©ì¡°íšŒ -->
        <div id="integrated-view" class="page-content">
            <div class="page-header">
                <h1>í†µí•©ì¡°íšŒ</h1>
                <p>ëª¨ë“  ì‚¬ìš©ìì˜ ì£¼ë¬¸ ë°ì´í„°ë¥¼ í†µí•©í•˜ì—¬ ì¡°íšŒí•©ë‹ˆë‹¤</p>
            </div>

            <div class="card">
                <div class="card-title">
                    <span>ì „ì²´ ì£¼ë¬¸ í˜„í™©</span>
                    <button class="btn btn-primary btn-small" onclick="loadIntegratedOrders()">ìƒˆë¡œê³ ì¹¨</button>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>ì‚¬ìš©ì</label>
                        <select id="integrated-user-filter">
                            <option value="">ì „ì²´</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ê¸°ê°„</label>
                        <div style="display: flex; gap: 8px; align-items: center;">
                            <input type="date" id="integrated-date-from" style="flex: 1;">
                            <span>~</span>
                            <input type="date" id="integrated-date-to" style="flex: 1;">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>ìƒíƒœ</label>
                        <select id="integrated-status-filter">
                            <option value="">ì „ì²´</option>
                            <option value="pending">ë¯¸ì¶œê³ </option>
                            <option value="shipped">ì¶œê³ ì™„ë£Œ</option>
                        </select>
                    </div>
                    <div class="form-group" style="flex: 0;">
                        <label>&nbsp;</label>
                        <button class="btn btn-secondary" onclick="loadIntegratedOrders()">í•„í„° ì ìš©</button>
                    </div>
                </div>

                <div class="result-summary" id="integrated-summary"></div>
                <div class="table-container" id="integrated-table"></div>
                <div class="btn-group">
                    <button class="btn btn-success" onclick="downloadIntegratedExcel()">ì—‘ì…€ ë‹¤ìš´ë¡œë“œ</button>
                </div>
            </div>
        </div>

        <!-- ì›ê°€ê´€ë¦¬ -->
        <div id="cost-management" class="page-content">
            <div class="page-header">
                <h1>ì›ê°€ê´€ë¦¬</h1>
                <p>ë¶€ìœ„ë³„ ì›ê°€ ë° í¬ì¥ì¬ ì›ê°€ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤</p>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <!-- ë¶€ìœ„ë³„ ì›ê°€ -->
                <div class="card">
                    <div class="card-title">
                        <span>ë¶€ìœ„ë³„ ì›ê°€ (100gë‹¹)</span>
                        <button class="btn btn-primary btn-small" onclick="openAddPartModal()">+ ì¶”ê°€</button>
                    </div>
                    <div class="table-container" id="parts-table"></div>
                </div>

                <!-- í¬ì¥ì¬ ì›ê°€ -->
                <div class="card">
                    <div class="card-title">
                        <span>í¬ì¥ì¬ ì›ê°€</span>
                        <button class="btn btn-primary btn-small" onclick="openAddPackagingModal()">+ ì¶”ê°€</button>
                    </div>
                    <div class="table-container" id="packaging-table"></div>
                </div>
            </div>
        </div>

        <!-- SKUìƒí’ˆê´€ë¦¬ -->
        <div id="sku-management" class="page-content">
            <div class="page-header">
                <h1>SKUìƒí’ˆê´€ë¦¬</h1>
                <p>SKU ìƒí’ˆê³¼ êµ¬ì„±í’ˆì„ ê´€ë¦¬í•©ë‹ˆë‹¤</p>
            </div>

            <div class="card">
                <div class="card-title">
                    <span>SKU ìƒí’ˆ ëª©ë¡</span>
                    <button class="btn btn-primary" onclick="openAddSkuModal()">+ ìƒí’ˆ ì¶”ê°€</button>
                </div>
                <div class="table-container" id="sku-table"></div>
            </div>
        </div>

        <!-- ê±°ë˜ì²˜ë³„ ìƒí’ˆê´€ë¦¬ -->
        <div id="vendor-mapping" class="page-content">
            <div class="page-header">
                <h1>ê±°ë˜ì²˜ë³„ ìƒí’ˆê´€ë¦¬</h1>
                <p>ê±°ë˜ì²˜ ìƒí’ˆëª…ê³¼ SKU ë§¤í•‘ì„ ê´€ë¦¬í•©ë‹ˆë‹¤</p>
            </div>

            <div class="card">
                <div class="card-title">
                    <span>ê±°ë˜ì²˜ ë§¤í•‘</span>
                    <button class="btn btn-primary" onclick="openAddMappingModal()">+ ë§¤í•‘ ì¶”ê°€</button>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ê±°ë˜ì²˜ ì„ íƒ</label>
                        <select id="vendor-filter" onchange="loadVendorMappings()">
                            <option value="">ì „ì²´</option>
                        </select>
                    </div>
                </div>
                <div class="table-container" id="vendor-mapping-table"></div>
            </div>
        </div>

        <!-- ê±°ë˜ì²˜ë³„ íƒë°°ê´€ë¦¬ -->
        <div id="vendor-delivery" class="page-content">
            <div class="page-header">
                <h1>ê±°ë˜ì²˜ë³„ íƒë°°ê´€ë¦¬</h1>
                <p>ê±°ë˜ì²˜ë³„ ì—‘ì…€ í…œí”Œë¦¿ì„ ê´€ë¦¬í•©ë‹ˆë‹¤</p>
            </div>

            <div class="card">
                <div class="card-title">ê±°ë˜ì²˜ í…œí”Œë¦¿ ì„¤ì •</div>
                <div class="table-container" id="vendor-template-table"></div>
            </div>
        </div>

        <!-- ë°œì£¼ì„œ ë³€í™˜ (ì‚¬ìš©ìë³„) -->
        <div id="convert" class="page-content">
            <div class="page-header">
                <h1>ë°œì£¼ì„œ ë³€í™˜</h1>
                <p id="convert-user-info">ì‚¬ìš©ìë¥¼ ì„ íƒí•˜ì„¸ìš”</p>
            </div>

            <div class="card">
                <div class="card-title">ì—‘ì…€ íŒŒì¼ ì—…ë¡œë“œ</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ë°œì£¼ì²˜ ì„ íƒ</label>
                        <select id="vendor-name">
                            <option value="">ë°œì£¼ì²˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                        </select>
                    </div>
                </div>
                <div class="upload-area" id="upload-area">
                    <input type="file" id="file-input" accept=".xlsx,.xls" multiple>
                    <div class="upload-icon">ğŸ“</div>
                    <div class="upload-text">ì—‘ì…€ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</div>
                </div>
                <div id="file-info" class="status success"></div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-primary" id="btn-convert" onclick="convertOrders()" disabled>ë³€í™˜í•˜ê¸°</button>
                </div>
            </div>

            <div class="card" id="convert-result" style="display: none;">
                <div class="card-title">
                    <span>ë³€í™˜ ê²°ê³¼</span>
                    <span id="convert-result-summary"></span>
                </div>
                <div class="table-container" id="convert-result-table"></div>
                <div class="btn-group">
                    <button class="btn btn-success" onclick="confirmConvertedData()">ë³€í™˜í™•ì •ìœ¼ë¡œ ì´ë™</button>
                </div>
            </div>
        </div>

        <!-- ë³€í™˜í™•ì • (ì‚¬ìš©ìë³„) -->
        <div id="confirmed" class="page-content">
            <div class="page-header">
                <h1>ë³€í™˜í™•ì •</h1>
                <p id="confirmed-user-info">ì‚¬ìš©ìë¥¼ ì„ íƒí•˜ì„¸ìš”</p>
            </div>

            <div class="card">
                <div class="card-title">
                    <span>í™•ì • ëŒ€ê¸° ëª©ë¡</span>
                    <span class="badge" id="confirmed-badge">0</span>
                </div>
                <div class="result-summary" id="confirmed-summary"></div>
                <div class="table-container" id="confirmed-table"></div>
                <div class="btn-group">
                    <button class="btn btn-success" onclick="registerOrders()">ì „ì²´ì£¼ë¬¸ê´€ë¦¬ë¡œ ë“±ë¡</button>
                    <button class="btn btn-primary" onclick="downloadConfirmedExcel()">ì—‘ì…€ ë‹¤ìš´ë¡œë“œ</button>
                </div>
            </div>
        </div>

        <!-- ì „ì²´ì£¼ë¬¸ê´€ë¦¬ (ì‚¬ìš©ìë³„) -->
        <div id="order-management" class="page-content">
            <div class="page-header">
                <h1>ì „ì²´ì£¼ë¬¸ê´€ë¦¬</h1>
                <p id="order-user-info">ì‚¬ìš©ìë¥¼ ì„ íƒí•˜ì„¸ìš”</p>
            </div>

            <div class="card">
                <div class="card-title">
                    <span>ì£¼ë¬¸ ëª©ë¡</span>
                    <span class="badge" id="order-badge">0</span>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ê¸°ê°„</label>
                        <div style="display: flex; gap: 8px; align-items: center;">
                            <input type="date" id="order-date-from" style="flex: 1;">
                            <span>~</span>
                            <input type="date" id="order-date-to" style="flex: 1;">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>ìƒíƒœ</label>
                        <select id="order-status-filter">
                            <option value="">ì „ì²´</option>
                            <option value="pending">ë¯¸ì¶œê³ </option>
                            <option value="shipped">ì¶œê³ ì™„ë£Œ</option>
                        </select>
                    </div>
                    <div class="form-group" style="flex: 0;">
                        <label>&nbsp;</label>
                        <button class="btn btn-secondary" onclick="loadUserOrders()">í•„í„° ì ìš©</button>
                    </div>
                </div>
                <div class="result-summary" id="order-summary"></div>
                <div class="table-container" id="order-table"></div>
                <div class="btn-group">
                    <button class="btn btn-success" onclick="bulkUpdateStatus('shipped', true)">ì„ íƒ ì¶œê³ ì™„ë£Œ</button>
                    <button class="btn btn-primary" onclick="bulkUpdateStatus('paid', true)">ì„ íƒ ì…ê¸ˆì™„ë£Œ</button>
                    <button class="btn btn-warning" onclick="downloadOrderExcel()">ì—‘ì…€ ë‹¤ìš´ë¡œë“œ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ë‚ ì§œ ìƒì„¸ ëª¨ë‹¬ -->
    <div class="modal" id="day-modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h3 id="day-modal-title">ë‚ ì§œ ìƒì„¸</h3>
                <button class="modal-close" onclick="closeDayModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="day-orders-list"></div>
                <div class="btn-group" style="margin-top: 16px;">
                    <button class="btn btn-success" onclick="calculateDayOrder()">ë°œì£¼ëŸ‰ ê³„ì‚°</button>
                </div>
                <div id="day-calculation-result"></div>
            </div>
        </div>
    </div>

    <!-- ì‚¬ìš©ì ì¶”ê°€ ëª¨ë‹¬ -->
    <div class="modal" id="user-modal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h3>ì‚¬ìš©ì ì¶”ê°€</h3>
                <button class="modal-close" onclick="closeUserModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>ì‚¬ìš©ì ì´ë¦„</label>
                    <input type="text" id="new-user-name" placeholder="ì˜ˆ: í™ê¸¸ë™">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeUserModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="addUser()">ì¶”ê°€</button>
            </div>
        </div>
    </div>

    <!-- ë¶€ìœ„ ì¶”ê°€ ëª¨ë‹¬ -->
    <div class="modal" id="part-modal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h3>ë¶€ìœ„ ì¶”ê°€/ìˆ˜ì •</h3>
                <button class="modal-close" onclick="closePartModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>ë¶€ìœ„ëª…</label>
                    <input type="text" id="part-name" placeholder="ì˜ˆ: ë“±ì‹¬">
                </div>
                <div class="form-group">
                    <label>100gë‹¹ ì›ê°€ (ì›)</label>
                    <input type="number" id="part-price" placeholder="ì˜ˆ: 7800">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closePartModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="savePart()">ì €ì¥</button>
            </div>
        </div>
    </div>

    <!-- í¬ì¥ì¬ ì¶”ê°€ ëª¨ë‹¬ -->
    <div class="modal" id="packaging-modal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h3>í¬ì¥ì¬ ì¶”ê°€/ìˆ˜ì •</h3>
                <button class="modal-close" onclick="closePackagingModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>í¬ì¥ì¬ëª…</label>
                    <input type="text" id="packaging-name" placeholder="ì˜ˆ: ì„ ë¬¼í¬ì¥">
                </div>
                <div class="form-group">
                    <label>ê°€ê²© (ì›)</label>
                    <input type="number" id="packaging-price" placeholder="ì˜ˆ: 5000">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closePackagingModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="savePackaging()">ì €ì¥</button>
            </div>
        </div>
    </div>

    <!-- SKU ì¶”ê°€/ìˆ˜ì • ëª¨ë‹¬ -->
    <div class="modal" id="sku-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="sku-modal-title">SKU ìƒí’ˆ ì¶”ê°€</h3>
                <button class="modal-close" onclick="closeSkuModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <div class="form-group">
                        <label>ìƒí’ˆëª…</label>
                        <input type="text" id="sku-name" placeholder="ì˜ˆ: í•œìš° ë“±ì‹¬ ì„¸íŠ¸ 1kg">
                    </div>
                    <div class="form-group">
                        <label>í¬ì¥ì¬</label>
                        <select id="sku-packaging"></select>
                    </div>
                    <div class="form-group">
                        <label>íŒë§¤ê°€ê²© (ì›)</label>
                        <input type="number" id="sku-price" placeholder="ì˜ˆ: 89000">
                    </div>
                </div>
                <div style="margin-top: 16px;">
                    <label style="font-weight: 600; margin-bottom: 8px; display: block;">êµ¬ì„±í’ˆ</label>
                    <div id="composition-list"></div>
                    <button class="btn btn-secondary btn-small" onclick="addCompositionRow()">+ êµ¬ì„±í’ˆ ì¶”ê°€</button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeSkuModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="saveSku()">ì €ì¥</button>
            </div>
        </div>
    </div>

    <!-- ë§¤í•‘ ì¶”ê°€ ëª¨ë‹¬ -->
    <div class="modal" id="mapping-modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3>ê±°ë˜ì²˜ ë§¤í•‘ ì¶”ê°€</h3>
                <button class="modal-close" onclick="closeMappingModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>ê±°ë˜ì²˜ëª…</label>
                    <input type="text" id="mapping-vendor" placeholder="ì˜ˆ: ì •ë§ˆì¸í‘¸ë“œ">
                </div>
                <div class="form-group">
                    <label>ìƒí’ˆì½”ë“œ</label>
                    <input type="text" id="mapping-code" placeholder="ì˜ˆ: JM-001">
                </div>
                <div class="form-group">
                    <label>ê±°ë˜ì²˜ ìƒí’ˆëª…</label>
                    <input type="text" id="mapping-product-name" placeholder="ì˜ˆ: ë“±ì‹¬ì„¸íŠ¸(1kg)">
                </div>
                <div class="form-group">
                    <label>SKU ìƒí’ˆ</label>
                    <select id="mapping-sku"></select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeMappingModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="saveMapping()">ì €ì¥</button>
            </div>
        </div>
    </div>

    <!-- ë¡œë”© -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <p style="margin-top: 16px;">ì²˜ë¦¬ ì¤‘...</p>
    </div>

    <!-- í† ìŠ¤íŠ¸ -->
    <div class="toast-container" id="toast-container"></div>

    <script src="/static/js/app.js"></script>
</body>
</html>
